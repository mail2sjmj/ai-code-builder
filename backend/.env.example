# ─── AI Code Builder — environment configuration example ─────────────────────
#
# CONFIG LAYERING (later source = higher priority):
#   1. Built-in defaults           (settings.py field defaults)
#   2. .env                        base config + secrets      (gitignored; copy this file)
#   3. .env.<APP_ENV>              per-env overrides           (committed; no secrets)
#   4. .env.<APP_ENV>.local        personal local tweaks       (gitignored)
#   5. OS environment variables                                (always win)
#
# QUICK START:
#   cp .env.example .env
#   # Set ANTHROPIC_API_KEY and optionally INBOUND_DIR / TEMP_DIR / LOG_DIR, then:
#   APP_ENV=development  →  also loads .env.development  (default)
#   APP_ENV=staging      →  also loads .env.staging
#   APP_ENV=production   →  also loads .env.production
#
# Only set values here that apply to ALL environments.
# Environment-specific tunables belong in .env.<APP_ENV> files.

# ─── Application ──────────────────────────────────────────────────────────────
APP_ENV=development                  # development | staging | production
APP_VERSION=1.0.0
API_PREFIX=/api/v1

# ─── File Upload ──────────────────────────────────────────────────────────────
MAX_UPLOAD_SIZE_MB=50
ALLOWED_EXTENSIONS=[".csv",".xlsx"]

# INBOUND_DIR: where uploaded files and their parquet caches are stored.
# Defaults to <os-temp>/code_builder_inbound via tempfile.gettempdir().
# Set to a persistent, backed-up volume in staging/production.
#   Unix/macOS: INBOUND_DIR=/var/data/code_builder/inbound
#   Windows:    INBOUND_DIR=C:\data\code_builder\inbound
# INBOUND_DIR=

SESSION_TTL_SECONDS=3600            # seconds; overridden per env in .env.<APP_ENV>

# ─── Sandbox Execution ────────────────────────────────────────────────────────
# TEMP_DIR: where ephemeral sandbox execution artifacts are written.
# Can point to a fast/local disk separate from INBOUND_DIR.
# Defaults to <os-temp>/code_builder_sessions via tempfile.gettempdir().
#   Unix/macOS: TEMP_DIR=/var/tmp/code_builder/sessions
#   Windows:    TEMP_DIR=C:\Temp\code_builder\sessions
# TEMP_DIR=

SANDBOX_TIMEOUT_SECONDS=30          # overridden per env in .env.<APP_ENV>
SANDBOX_MAX_MEMORY_MB=512
SANDBOX_MAX_OUTPUT_ROWS=100000
PREVIEW_ROW_COUNT=50

# ─── Logging ──────────────────────────────────────────────────────────────────
# LOG_DIR: directory for rotating log files (app.<APP_ENV>.log).
# Defaults to <os-temp>/code_builder_logs via tempfile.gettempdir().
# Set to a centrally-monitored path in staging/production.
#   Unix/macOS: LOG_DIR=/var/log/code_builder
#   Windows:    LOG_DIR=C:\Logs\code_builder
# LOG_DIR=

LOG_LEVEL=INFO                      # DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_MAX_BYTES=10485760              # 10 MB per file before rotation
LOG_BACKUP_COUNT=5                  # number of rotated files to retain

# ─── Anthropic AI — REQUIRED ──────────────────────────────────────────────────
ANTHROPIC_API_KEY=sk-ant-...        # get from console.anthropic.com
ANTHROPIC_MODEL=claude-sonnet-4-6
REFINE_MAX_TOKENS=2048
CODEGEN_MAX_TOKENS=8192
AI_TEMPERATURE=0.2
AI_REQUEST_TIMEOUT_SECONDS=120
